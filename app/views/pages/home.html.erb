<div class="banner">
  <h1 class="banner-header">Solana is the new black</h1>
  <div class="search-bar">
    <%= simple_form_for :search, url: collections_path, method: "GET", html: { class: 'form-inline' } do |f| %>
      <div class="search-bar-form">
        <%= f.input :keyword, label: false, :input_html => { :style=> 'width: 470px' }  %>
        <button type="submit" class="btn-search">
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
      </div>
    <% end %>
  </div>
</div>

<div class="container">
  <div class="wrapper">
    <!-- Popular collections-->
    <div class="dashboard-container">
      <h2 class="dashboard-header">Popular collections</h2>
      <div class="dashboard-wrapper">
        <div class="dashboard-wrapper-headers">
          <p class="p1">Collection</p>
          <p class="p2">Supply</p>
          <p class="p3">Listings</p>
          <p class="p4">Floor price</p>
          <p class="p5">Volume</p>
        </div>
        <!-- This is the iteration for most popular collections-->
        <div class="dashboard">
          <% @popular_collections.each do |collection| %>
            <div class="dashboard-item" data-bs-toggle="modal" data-bs-target="#popular-collections-<%= collection.id %>">
              <div class="dashboard-item-image-wrapper">
                <%=image_tag "#{collection.image}", class:"dashboard-item-image"%>
                <p class="dashboard-item-image-p"><%=collection.name%></p>
              </div>
              <p class="item-p item-p2"><%= collection.listings %></p>
              <p class="item-p item-p3"><%= collection.floor_price_in_sol.round(2) %> SOL</p>
              <p class="item-p item-p4"><%= collection.volume_in_sol.round(0) %> SOL</p>
              <div class="eye-button">
                <p class="fa-solid fa-eye" style="color: grey"></p>
              </div>
            </div>

            <!-- MODAL: Popular collections: More information about a specific popular collection starts here-->
            <div class="modal fade" id="popular-collections-<%= collection.id %>" tabindex="-1">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-nft-wrapper">
                      <img src=<%= collection.image %> alt="" class="modal-nft-image">
                    <div class="nft-collection-container">
                        <h2 class="nft-name"><%= collection.name %></h2>
                        <% if current_user %>
                          <p class="fa-solid fa-eye" style="color: grey" data-collection="<%= collection.id.to_s %>" data-action="click->watchlist#add"><%= flash[:notice] %></p>
                        <% else %>
                          <p class="fa-solid fa-eye" style="color: grey" ></p>
                        <% end %>
                      </div>
                      <p class="nft-collection modal-desription"><%= collection.description %></p>
                      <div class="modal-nft-data">
                        <div>
                          <p class="nft-data">Floor price: <%= collection.floor_price %> SOL</p>
                          <p class="nft-data">Supply: <%= collection.supply%></p>
                      </div>
                        <div>
                          <p class="nft-data">Volume: <%= collection.volume%></p>
                          <p class="nft-data">Owners: <%= collection.owner%></p>
                        </div>
                      </div>
                      <div  class="modal-nft-wrapper-info">
                        <div class="collection-social-container">
                          <a href="<%= collection.website%>" src="Website" target=”_blank” class="fa-solid fa-browser collection-social"></a>
                          <a href="<%= collection.discord%>" src="Discord" target=”_blank” class="fa-brands fa-discord collection-social"></a>
                          <a href="<%= collection.twitter%>" src="Twitter" target=”_blank” class="fa-brands fa-twitter collection-social"></a>
                        </div>
                        <button class="close-modal" data-bs-target="" data-bs-toggle="modal" data-bs-dismiss="modal">Close</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            <!-- MODAL: Popular collections: More information about a specific popular collection ends here-->
          <% end %>
        </div>
      </div>
    </div>


    <!-- Upcoming drops-->
    <div class="card-container">
      <h2 class="card-header-big">Upcoming drops</h2>
      <div class="wrapper-cards-btn drop">
        <% @upcoming_collections.each do |collection| %>
          <div class="card-xs-small" data-bs-toggle="modal" data-bs-target="#upcoming-drops-<%= collection[:id] %>">
            <%=image_tag "#{collection[:image]}", class:"card-xs-small-image" %>
            <div class="card-xs-small-content">
              <div class="content-info card-xs-small-content-info">
                <p class="content-info collection-name"><%= collection[:name] %></p>
                <p class="content-info card-text"><small class="text-muted">Supply: <%=collection[:supply]%></small></p>
              </div>
            </div>
          </div>

          <!-- MODAL upcoming drops -->
          <div class="modal fade" id="upcoming-drops-<%= collection[:id] %>" tabindex="-1">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-nft-wrapper">
                  <%=image_tag "#{collection[:image]}", class: "modal-nft-image" %>
                  <div class="nft-collection-container">
                    <h2 class="nft-name"><%= collection[:name] %></h2>
                    <% if current_user %>
                      <p class="fa-solid fa-eye" style="color: grey" data-collection="<%= collection[:id] %>" data-action="click->watchlist#add"><%= flash[:notice] %></p>
                    <% else %>
                      <p class="fa-solid fa-eye" style="color: grey" ></p>
                    <% end %>
                  </div>
                  <p class="nft-collection modal-desription"><%= collection[:description] %></p>
                  <div class="modal-nft-data">
                    <div>
                      <p class="nft-data">Floor price: <%= collection[:floor_price] %> SOL</p>
                      <p class="nft-data">Supply: <%= collection[:supply]%></p>
                    </div>
                  </div>
                  <div  class="modal-nft-wrapper-info">
                    <div class="collection-social-container">
                      <a href="<%= collection[:discord]%>" src="Discord" target=”_blank” class="fa-brands fa-discord collection-social"></a>
                      <a href="<%= collection[:twitter]%>" src="Twitter" target=”_blank” class="fa-brands fa-twitter collection-social"></a>
                    </div>
                    <button class="close-modal" data-bs-target="" data-bs-toggle="modal" data-bs-dismiss="modal">Close</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <% end %>
        <!-- Modal trigger button -->
        <button type="button" class="btn btn-green-link" data-bs-toggle="modal" data-bs-target="#upcoming-drops">
          See more
        </button>
      </div>
    </div>


      <!-- MODAL: Upcoming Drops see more START-->
      <div class="modal fade" id="upcoming-drops" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Upcoming drops</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <!-- Iteration -->
              <div class="row">
                <% @upcoming_collections.each do |collection| %>
                  <div class="col-md-6 p-1">
                    <img src=<%= collection[:image] %> class="img-fluid rounded-start">
                  </div>
                  <div class="col-md-6">
                    <p class="collection-data">Name: <%= collection[:name] %></p>
                  </div>
                <% end %>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-green-link" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
      <!-- Modal for upcoming drops ends -->



      <!-- Most popular today -->
      <div class="card-container2">
        <h2 class="card-header-big">Most popular today</h2>
        <div class="wrapper-cards-btn" data-bs-toggle="modal" data-bs-target="#most-popular-today-0">
          <% @popular_collections_today.first(2).each do |collection| %>
            <div class="big-image" data-bs-toggle="modal" data-bs-target="#most-popular-today-0<%= collection.id %>">
              <%= image_tag "#{collection.image}", class: "card-lg-image"%>
              <h2 class="h2-highest" > <%= collection.name %> </h2>
              <p class="p-highest">Volume: <%= collection.volume_in_sol.round(0) %> SOL</p>
            </div>

            <div class="modal fade" id="most-popular-today-0<%= collection.id %>" tabindex="-1">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-nft-wrapper">
                    <img src=<%= collection.image %> alt="" class="modal-nft-image">
                    <div class="nft-collection-container">
                      <h2 class="nft-name"><%= collection.name %></h2>
                      <% if current_user %>
                        <p class="fa-solid fa-eye" style="color: grey" data-collection="<%= collection.id.to_s %>" data-action="click->watchlist#add"><%= flash[:notice] %></p>
                      <% else %>
                        <p class="fa-solid fa-eye" style="color: grey" ></p>
                      <% end %>
                    </div>
                    <p class="nft-collection modal-desription"><%= collection.description %></p>
                    <div class="modal-nft-data">
                      <div>
                        <p class="nft-data">Floor price: <%= collection.floor_price %> SOL</p>
                        <p class="nft-data">Supply: <%= collection.supply%></p>
                      </div>
                      <div>
                        <p class="nft-data">Volume: <%= collection.volume%></p>
                        <p class="nft-data">Owners: <%= collection.owner%></p>
                      </div>
                    </div>
                    <div  class="modal-nft-wrapper-info">
                      <div class="collection-social-container">
                        <a href="<%= collection.discord%>" src="Discord" target=”_blank” class="fa-brands fa-discord collection-social"></a>
                        <a href="<%= collection.twitter%>" src="Twitter" target=”_blank” class="fa-brands fa-twitter collection-social"></a>
                      </div>
                      <button class="close-modal" data-bs-target="" data-bs-toggle="modal" data-bs-dismiss="modal">Close</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          <!-- MODAL: Popular collections: More information about a specific popular collection ends here-->
          <% end %>
          <button type="button" class="btn btn-green-link" data-bs-toggle="modal" data-bs-target="#most-popular-today">
            See more </button>
        </div>
      </div>

      <!-- MODAL: Most Popular Today see more starts here -->
      <div class="modal fade" id="most-popular-today" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Most popular today</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="row">
                <% @popular_collections_today.each do |collection| %>
                  <div class="col-md-4 p-1">
                    <img src=<%= collection.image  %> class="img-fluid rounded-start" >
                  </div>
                  <div class="col-md-8">
                    <p class="collection-data">Name: <%= collection.name %></p>
                    <p class="collection-data">Volume: <%= collection.volume_in_sol.round(0) %> SOL</p>
                  </div>
                <% end %>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-green-link" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Modal for most popular today ends here -->
  </div>
